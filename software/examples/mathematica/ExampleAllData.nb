Notebook[{
 Cell[
  BoxData[{
   RowBox[{"Needs", "[", "\"\<NETLink`\>\"", "]"}],
   RowBox[{"LoadNETAssembly", "[", RowBox[{"\"\<Tinkerforge\>\"", ",", RowBox[{RowBox[{"NotebookDirectory", "[", "]"}], "<>", "\"\<../../..\>\""}]}], "]"}]
  }], "Input"
 ],
 Cell[
  BoxData[{
   RowBox[{"host", "=", "\"\<localhost\>\""}],
   RowBox[{"port", "=", "4223"}],
   RowBox[{"uid", "=", "\"\<XXYYZZ\>\"", RowBox[{"(*", "Change XXYYZZ to the UID of your IMU Brick 2.0", "*)"}]}],
   RowBox[{"
"}],
   RowBox[{"(*", "Create IPConnection and device object", "*)"}],
   RowBox[{"ipcon", "=", RowBox[{"NETNew", "[", "\"\<Tinkerforge.IPConnection\>\"", "]"}]}],
   RowBox[{"imu", "=", RowBox[{"NETNew", "[", RowBox[{"\"\<Tinkerforge.BrickIMUV2\>\"", ",", "uid", ",", "ipcon"}], "]"}]}],
   RowBox[{"ipcon", "@", RowBox[{"Connect", "[", RowBox[{"host", ",", "port"}], "]"}]}],
   RowBox[{"
"}],
   RowBox[{"(*", "Callback function for all data callback", "*)"}],
   RowBox[{RowBox[{"AllDataCB", "[", RowBox[{"sender_", ",", RowBox[{"{", RowBox[{"acceleration1_", ",", "acceleration2_", ",", "acceleration3_"}], "}"}], ",", RowBox[{"\[IndentingNewLine]", "{", RowBox[{"magneticField1_", ",", "magneticField2_", ",", "magneticField3_"}], "}"}], ",", RowBox[{"\[IndentingNewLine]", "{", RowBox[{"angularVelocity1_", ",", "angularVelocity2_", ",", "angularVelocity3_"}], "}"}], ",", RowBox[{"\[IndentingNewLine]", "{", RowBox[{"eulerAngle1_", ",", "eulerAngle2_", ",", "eulerAngle3_"}], "}"}], ",", RowBox[{"\[IndentingNewLine]", "{", RowBox[{"quaternion1_", ",", "quaternion2_", ",", "quaternion3_", ",", "quaternion4_"}], "}"}], ",", RowBox[{"\[IndentingNewLine]", "{", RowBox[{"linearAcceleration1_", ",", "linearAcceleration2_", ",", "linearAcceleration3_"}], "}"}], ",", RowBox[{"\[IndentingNewLine]", "{", RowBox[{"gravityVector1_", ",", "gravityVector2_", ",", "gravityVector3_"}], "}"}], ",", "temperature_", ",", RowBox[{"\[IndentingNewLine]", "calibrationStatus_"}]}], "]"}], ":=", "\[IndentingNewLine]", RowBox[{"Print", "[", RowBox[{"\"\<Acceleration        x: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"acceleration1", "/", "100.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\[IndentingNewLine]", "\"\<                    y: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"acceleration2", "/", "100.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\[IndentingNewLine]", "\"\<                    z: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"acceleration3", "/", "100.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\"\< m/s\.b2\\n\>\"", "<>", "\[IndentingNewLine]", "\"\<Magnetic Field      x: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"magneticField1", "/", "16.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\[IndentingNewLine]", "\"\<                    y: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"magneticField2", "/", "16.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\[IndentingNewLine]", "\"\<                    z: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"magneticField3", "/", "16.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\"\< \.b5T\\n\>\"", "<>", "\[IndentingNewLine]", "\"\<Angular Velocity    x: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"angularVelocity1", "/", "16.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\[IndentingNewLine]", "\"\<                    y: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"angularVelocity2", "/", "16.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\[IndentingNewLine]", "\"\<                    z: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"angularVelocity3", "/", "16.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\"\< \.b0/s\\n\>\"", "<>", "\[IndentingNewLine]", "\"\<Euler Angle         x: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"eulerAngle1", "/", "16.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\[IndentingNewLine]", "\"\<                    y: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"eulerAngle2", "/", "16.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\[IndentingNewLine]", "\"\<                    z: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"eulerAngle3", "/", "16.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\"\< \.b0\\n\>\"", "<>", "\[IndentingNewLine]", "\"\<Quaternion          x: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"quaternion2", "/", "16383.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\[IndentingNewLine]", "\"\<                    y: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"quaternion3", "/", "16383.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\[IndentingNewLine]", "\"\<                    z: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"quaternion4", "/", "16383.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\[IndentingNewLine]", "\"\<                    w: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"quaternion1", "/", "16383.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\"\<\\n\>\"", "<>", "\[IndentingNewLine]", "\"\<Linear Acceleration x: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"linearAcceleration1", "/", "100.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\[IndentingNewLine]", "\"\<                    y: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"linearAcceleration2", "/", "100.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\[IndentingNewLine]", "\"\<                    z: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"linearAcceleration3", "/", "100.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\"\< m/s\.b2\\n\>\"", "<>", "\[IndentingNewLine]", "\"\<Gravity Vector      x: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"gravityVector1", "/", "100.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\[IndentingNewLine]", "\"\<                    y: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"gravityVector2", "/", "100.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\[IndentingNewLine]", "\"\<                    z: \>\"", "<>", RowBox[{"ToString", "[", RowBox[{"NumberForm", "[", RowBox[{RowBox[{"N", "[", RowBox[{"gravityVector3", "/", "100.0"}], "]"}], ",", RowBox[{"{", RowBox[{"10", ",", "2"}], "}"}]}], "]"}], "]"}], "<>", "\"\< m/s\.b2\\n\>\"", "<>", "\[IndentingNewLine]", "\"\<Temperature         \>\"", "<>", RowBox[{"ToString", "[", "temperature", "]"}], "<>", "\"\< \.b0C\\n\>\"", "<>", "\[IndentingNewLine]", "\"\<Calibration Status  \>\"", "<>", RowBox[{"StringJoin", "[", RowBox[{"Map", "[", RowBox[{"ToString", ",", RowBox[{"IntegerDigits", "[", RowBox[{"calibrationStatus", ",", "2", ",", "8"}], "]"}]}], "]"}], "]"}], "<>", "\"\<\\n\>\""}], "]"}]}],
   RowBox[{"AddEventHandler", "[", RowBox[{RowBox[{"imu", "@", "AllDataCallback"}], ",", "AllDataCB"}], "]"}],
   RowBox[{"
"}],
   RowBox[{"(*", "Set period for all data callback to 0.1s (100ms)", "*)"}],
   RowBox[{"imu", "@", RowBox[{"SetAllDataPeriod", "[", "100", "]"}]}],
   RowBox[{"
"}],
   RowBox[{"Input", "[", "\"\<Click OK to exit\>\"", "]"}],
   RowBox[{"
"}],
   RowBox[{"(*", "Clean up", "*)"}],
   RowBox[{"ipcon", "@", RowBox[{"Disconnect", "[", "]"}]}],
   RowBox[{"ReleaseNETObject", "[", "imu", "]"}],
   RowBox[{"ReleaseNETObject", "[", "ipcon", "]"}]
  }], "Input"
 ]
}]
